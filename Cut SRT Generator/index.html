<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SRT Cut Generator</title>

<style>
:root {
    --bg: #f6f7f9;
    --card: #ffffff;
    --primary: #2563eb;
    --primary-hover: #1d4ed8;
    --text: #111827;
    --muted: #6b7280;
    --border: #e5e7eb;
    --radius: 12px;
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    background: var(--bg);
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    color: var(--text);
    margin-top: 5rem;
}

.app {
    max-width: 1200px;
    margin: auto;
    padding: 24px;
}

.header {
    margin-bottom: 24px;
}

.header h1 {
    margin: 0;
    font-size: 1.6rem;
    font-weight: 600;
}

.header p {
    margin-top: 6px;
    color: var(--muted);
    font-size: 0.95rem;
}

/* ---------- Layout ---------- */

.layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 24px;
}

@media (min-width: 900px) {
    .layout {
        grid-template-columns: 1fr 1fr;
        align-items: stretch;
    }
}

@media (max-width: 900px) {
    body {
    margin-top: 2rem;
    }
}

@media (max-width: 600px) {
    body {
    margin-top: 0;
    }
}

/* ---------- Cards ---------- */

.card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 24px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.06);

    display: flex;
    flex-direction: column;
    height: 100%;
}

.form-group {
    margin-bottom: 18px;
}

label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 6px;
}

.helper {
    font-size: 0.75rem;
    color: var(--muted);
    margin-top: 6px;
}

textarea {
    width: 100%;
    min-height: 140px;
    resize: vertical;
    padding: 12px;
    font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
    font-size: 0.85rem;
    border: 1px solid var(--border);
    border-radius: 10px;
}

select,
input[type="number"] {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--border);
    border-radius: 10px;
    font-size: 0.85rem;
}

.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 16px;
}

.checkbox {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 0.85rem;
    margin-bottom: 20px;
}

.checkbox input {
    width: 16px;
    height: 16px;
}

button {
    margin-top: auto;
    padding: 14px;
    font-size: 0.9rem;
    font-weight: 600;
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
}

button:hover {
    background: var(--primary-hover);
}

/* ---------- Preview ---------- */

.preview-header {
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 12px;
}

.preview {
    background: linear-gradient(180deg, #0f172a, #020617);
    color: #e5e7eb;
    padding: 16px;
    border-radius: 12px;
    font-family: ui-monospace, monospace;
    font-size: 0.75rem;
    white-space: pre;

    flex: 1;
    overflow-y: auto;
}
</style>
</head>

<body>
<div class="app">

    <div class="header">
        <h1>SRT Cut Generator</h1>
        <p>Convert time ranges into frame-accurate SRT cut markers</p>
    </div>

    <div class="layout">

        <!-- LEFT PANEL -->
        <div class="card">

            <div class="form-group">
                <label>Cut instructions</label>
                <textarea id="inputText" placeholder="Eg. :24 to 1:04, 10:12 to 12:30"></textarea>
                <div class="helper">
                    Format: <code>:SS</code> or <code>MM:SS</code> → <code>to</code> → <code>MM:SS</code>
                </div>
            </div>

            <div class="grid">
                <div class="form-group">
                    <label>Frames per second</label>
                    <select id="fps">
                        <option value="23.976">23.976</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="29.97" selected>29.97</option>
                        <option value="30">30</option>
                        <option value="50">50</option>
                        <option value="59.94">59.94</option>
                        <option value="60">60</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Initial cut duration (seconds)</label>
                    <input type="number" id="initialDuration" value="1.0" step="0.1">
                </div>
            </div>

            <div class="checkbox">
                <input type="checkbox" id="initialCut" checked>
                <label for="initialCut">Include initial cut at timeline start</label>
            </div>

            <button onclick="generateSRT()">Generate & Download SRT</button>
        </div>

        <!-- RIGHT PANEL -->
        <div class="card">
            <div class="preview-header">Generated SRT Preview</div>
            <div class="preview" id="preview"></div>
        </div>

    </div>
</div>

<script>
function parseTime(t) {
    if (t.startsWith(":")) return parseInt(t.slice(1), 10);
    const [m, s] = t.split(":").map(Number);
    return m * 60 + s;
}

function secondsToSrtTime(seconds, fps) {
    const frame = Math.round(seconds * fps);
    seconds = frame / fps;

    const h = Math.floor(seconds / 3600);
    const m = Math.floor((seconds % 3600) / 60);
    const s = Math.floor(seconds % 60);
    const ms = Math.floor((seconds - Math.floor(seconds)) * 1000);

    return `${String(h).padStart(2,"0")}:` +
           `${String(m).padStart(2,"0")}:` +
           `${String(s).padStart(2,"0")},` +
           `${String(ms).padStart(3,"0")}`;
}

function extractRanges(text) {
    const regex = /([0-9:]+)\s*to\s*([0-9:]+)/g;
    const ranges = [];
    let match;
    while ((match = regex.exec(text)) !== null) {
        ranges.push([parseTime(match[1]), parseTime(match[2])]);
    }
    return ranges;
}

function generateSRT() {
    const text = inputText.value;
    const fps = parseFloat(document.getElementById("fps").value);
    const includeInitial = initialCut.checked;
    const initialDuration = parseFloat(initialDurationInput.value);

    const ranges = extractRanges(text);
    if (!ranges.length) {
        alert("No valid cut ranges found.");
        return;
    }

    let idx = 1;
    let lines = [];

    if (includeInitial) {
        lines.push(
            idx++,
            `${secondsToSrtTime(0, fps)} --> ${secondsToSrtTime(initialDuration, fps)}`,
            "CUT",
            ""
        );
    }

    for (const [start, end] of ranges) {
        lines.push(
            idx++,
            `${secondsToSrtTime(start, fps)} --> ${secondsToSrtTime(end, fps)}`,
            "CUT",
            ""
        );
    }

    const content = lines.join("\n");
    preview.textContent = content;

    const blob = new Blob([content], { type: "text/plain" });
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "cuts.srt";
    link.click();
}

const inputText = document.getElementById("inputText");
const initialCut = document.getElementById("initialCut");
const initialDurationInput = document.getElementById("initialDuration");
const preview = document.getElementById("preview");
</script>
</body>
</html>
